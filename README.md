# Задание 1 — найди ошибки

В этом репозитории находятся материалы тестового задания "Найди ошибки" для [14-й Школы разработки интерфейсов](https://academy.yandex.ru/events/frontend/shri_msk-2018-2) (осень 2018, Москва, Санкт-Петербург, Симферополь).

Для работы тестового приложения нужен Node.JS v9. В проекте используются [Yandex Maps API](https://tech.yandex.ru/maps/doc/jsapi/2.1/quick-start/index-docpage/) и [ChartJS](http://www.chartjs.org).

## Задание

Код содержит ошибки разной степени критичности. Некоторые из них — стилистические, а другие — даже не позволят вам запустить приложение. Вам нужно найти все ошибки и исправить их.

Пункты для самопроверки:

1. Приложение должно успешно запускаться.
1. По адресу http://localhost:9000 должна открываться карта с метками.
1. Должна правильно работать вся функциональность, перечисленная в условиях задания.
1. Не должно быть лишнего кода.
1. Все должно быть в едином codestyle.

## Запуск

```
npm i
npm start
```

При каждом запуске тестовые данные генерируются заново случайным образом.

## Выполнение
- Первая проблема заключалась в импорте initMap. Существует несколько способов импорта и я бы лучше использовал export default в map.js, но так, как задача стоит в исправлении кода, то нужно придерживаться общего стиля, в котором используется другой спосок импорта/экспорта.
- Были поправлены стили для блока #map, чтобы карта могла растянуться на всю страницу
- Пропавшие с карты станции удалось вернуть почитав api и разобравшись как добавляются объекты на карту, проблема была в том, что созданный менеджер объектов не был добавлен в карту.
- После прошлого исправления я был удивлен, найдя станции на карте в Иране, прочитав еще раз задание, понял что станции украли и их надо вернуть в Москву. Проблема оказалась в перепутанных местами широте и долготе в mapServerData
- На этом этапе уже что-то начало работать (карта со станциями появились на странице), тут я решил пройтись по коду и поправить стилистические моменты (были в основном проблемы с отступами, переносами и лишними пробелами)
- Контент метки не открывался. Нашел, что он формируется в details и там переопределяются функции build и clear, чтобы создавать и удалять диаграмму. Там использовались стрелочные функции из-за чего передавался неправильный this, сменил на обычные функции и все заработало.
- В диаграмме не отображались данные, тут явно была какая-то проблема. Оказалось все просто, максимальное значение по Y координате стояло 0.
- Увидел, что у кластеров зачем-то переопределяется preset в map.js непосредственно через objectManager, хотя он у каждого элемента определен свой в mappers.js. Убрав эту строчку иконки кластеров заработали как надо, чтобы она отображала на себе рабочие и сломанные станции
